#  API

获取已登录用户信息：GET /api/?_action=getUser **【需要已登录】成功返回数据，失败返回** 
首页列表的无限滚动：GET /api/?_action=getMoreBottles[&id=xxx] **【id 不写则默认为 9999999】**
获取某个瓶子的信息：GET /api/?_action=getBottle&id=xxx
获取某个瓶子的回复：GET /api/?_action=getComments&id=xxx
获取我的瓶子的列表：GET /api/?_action=getMyBottles[&id=xxx] **【id 不写则默认为 9999999】**
给某个瓶子点赞：GET /api/?_action=getLike&id=xxx **【需要已登录】 成功code返回0 失败返回1**
获取自己的未读消息 GET　/api/?_action=getMessage　　**【需要已登录】**
扔一个新瓶子：POST /api/?_action=postBottle，{ content, secret, gender } **【需要已登录】**
回复一个瓶子：POST /api/?_action=postComment，{ postId, content, secret, gender } **【需要已登录】**

获取包含某个话题的瓶子:  GET /api/?_action=getTopic&topic=%s[&id=%d]**【topic为话题，传纯文字（可能出问题）；id 默认9999999】】**


qq空间分享api
https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{完整的地址列表}}&title={{标题}}&desc={{要发送的动态的文字}}&summary={{内容摘要}}&site={{显示的来源}}&pics={{完整的图片地址}}


CREATE TABLE `info`.`topic` (
  `id` INT(11) UNSIGNED NOT NULL,
  `topicName` VARCHAR(20) NOT NULL,
  `postId` INT(11) UNSIGNED NOT NULL,
  `date` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC));

ALTER TABLE `info`.`data` 
ADD UNIQUE INDEX `time` (`userId` ASC, `date` ASC);

CREATE TABLE `info`.`like` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `userId` INT(11) UNSIGNED NOT NULL,
  `postId` INT(11) UNSIGNED NOT NULL,
  `date` INT(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  UNIQUE INDEX `userNpost` (`userId` ASC, `postId` ASC));

ALTER TABLE `bottle`.`like` 
ADD COLUMN `isRead` INT(1) UNSIGNED NOT NULL AFTER `date`;

ALTER TABLE `bottle`.`comment` 
CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
CHANGE COLUMN `postid` `postid` INT(11) UNSIGNED NOT NULL ,
CHANGE COLUMN `gender` `gender` INT(11) UNSIGNED NOT NULL ,
CHANGE COLUMN `secret` `secret` INT(11) UNSIGNED NOT NULL ,
CHANGE COLUMN `userId` `userId` INT(11) UNSIGNED NOT NULL ,
CHANGE COLUMN `date` `date` INT(11) UNSIGNED NOT NULL ,
CHANGE COLUMN `parentId` `parentId` INT(11) UNSIGNED NOT NULL DEFAULT '0' ,
ADD COLUMN `isRead` INT(1) UNSIGNED NOT NULL AFTER `avatar`;

ALTER TABLE `bottle`.`comment` 
ADD COLUMN `softDelete` INT(11) UNSIGNED NOT NULL AFTER `isRead`;

ALTER TABLE `bottle`.`data` 
CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
CHANGE COLUMN `gender` `gender` INT(11) UNSIGNED NOT NULL DEFAULT '1' ,
CHANGE COLUMN `secret` `secret` INT(11) UNSIGNED NOT NULL ,
CHANGE COLUMN `userId` `userId` INT(11) UNSIGNED NOT NULL DEFAULT '0' ,
CHANGE COLUMN `commentCount` `commentCount` INT(11) UNSIGNED NOT NULL DEFAULT '0' ,
CHANGE COLUMN `likeCount` `likeCount` INT(11) UNSIGNED NOT NULL DEFAULT '0' ,
CHANGE COLUMN `islike` `islike` INT(11) UNSIGNED NOT NULL DEFAULT '0' ,
CHANGE COLUMN `top` `top` INT(11) UNSIGNED NOT NULL DEFAULT '0' ,
CHANGE COLUMN `date` `date` INT(11) UNSIGNED NOT NULL ,
ADD COLUMN `softDelete` INT(11) UNSIGNED NOT NULL AFTER `more`;
